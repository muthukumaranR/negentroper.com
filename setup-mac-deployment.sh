#!/bin/bash

echo "üîß Mac Deployment Setup Guide"
echo "=============================="
echo ""
echo "1Ô∏è‚É£ Enable SSH on your Mac:"
echo "   System Preferences > Sharing > Remote Login ‚úì"
echo ""
echo "2Ô∏è‚É£ Generate SSH key for GitHub Actions:"
ssh-keygen -t ed25519 -C "github-actions-deploy" -f ~/.ssh/github-actions-deploy -N ""

echo ""
echo "3Ô∏è‚É£ Add to authorized keys:"
cat ~/.ssh/github-actions-deploy.pub >> ~/.ssh/authorized_keys

echo ""
echo "4Ô∏è‚É£ Create deployment directory:"
mkdir -p /opt/negentroper-com
echo "   Note: You may need to use sudo or choose a different path like ~/negentroper-deploy"

echo ""
echo "5Ô∏è‚É£ Your deployment info:"
echo "   DEPLOY_HOST: $(ipconfig getifaddr en0)"
echo "   DEPLOY_USER: $(whoami)"
echo "   DEPLOY_PATH: /opt/negentroper-com (or ~/negentroper-deploy)"
echo ""
echo "6Ô∏è‚É£ Private key for GitHub secrets (copy everything between the lines):"
echo "   ============ START PRIVATE KEY ============"
cat ~/.ssh/github-actions-deploy
echo "   ============ END PRIVATE KEY ============"
echo ""
echo "7Ô∏è‚É£ Add these to GitHub Secrets:"
echo "   https://github.com/muthukumaranR/negentroper.com/settings/secrets/actions"
echo ""
echo "   Secrets (click 'New repository secret'):"
echo "   - DEPLOY_HOST: $(ipconfig getifaddr en0)"
echo "   - DEPLOY_USER: $(whoami)"
echo "   - DEPLOY_SSH_KEY: [paste private key from above]"
echo ""
echo "8Ô∏è‚É£ Add these Variables (click 'Variables' tab, then 'New repository variable'):"
echo "   - DEPLOY_ENABLED: true"
echo "   - DEPLOY_PATH: /opt/negentroper-com"
echo "   - DEPLOY_URL: http://$(ipconfig getifaddr en0)"
echo ""
echo "‚úÖ Setup complete!"